---
title: '''面试系列二'''
date: 2020-01-07 19:53:42
categories: 面试
tags: 面试
---
**1.系统拆分**
1. 为什么要将系统进行拆分？
>1.为了提升开发效率，一个大系统多人维护经常会有冲突，系统拆分后，便于职责划分，且模块独立；2.拆分便于扩展，针对不同的模块，
>性能消耗不一样，可以有针对的扩容等；3.资源隔离，例如拆分后数据库可以独立，从而进行垂直拆分；

2. 如何进行系统拆分？
>也就是拆分原则：功能模块单一职责；拆分粒度适中；考虑团队结构；业务模型驱动；演进式拆分；避免环形依赖和双向依赖；

3. 分布式和微服务区别？
>分布式是一种手段，把不同机器分散在不同地方，机器间相互协作完成业务；微服务是一种特殊的分布式；主要是作用不同：微服务重在
>解耦，使每个模块相互独立；分布式重在资源共享和提升性能；

**2.分布式事务**
>* XA方案：两阶段提交，通常由一个事务管理器负责协调多个数据库事务；不常用：一个系统跨多个库不合适，而且数据库要求严格；
>* TCC方案：Try、Confirm、Concel；不常用：要自己写回滚或补偿代码，用在对事务严格要求的情况；
>* 本地消息表：利用数据库表来记录消息处理；不常用：因为依赖数据库管理事务，并发情况不好；
>* 可靠消息最终一致性方案：常用方案，利用可靠的MQ来保证消息一致性；
>* 最大努力通知方案：可靠消息最终一致性方案的一种简单版本，如果B执行失败，尽量尝试重试，超过一定次数放弃；

**3.高可用系统**
1. 高可用定义.
>高可用描述的是一个系统在大部分时间都是可用的，可以提供服务。高可用代表系统即使在发生硬件故障或系统升级的时候，服务依然可用。
2. 判断标准.
>一般情况下，使用多少个9来判断一个系统的可用性。例如99.9999%代表该系统在所有的运行时间中只有0.001%的时间是不可用的。
3. 哪些情况会导致系统不可用.
>1. 黑客攻击；
>2. 硬件故障；
>3. 并发量/用户请求激增导致整个服务宕掉或部分服务不可用；
>4. 代码中的坏味道导致内存泄漏或其他问题使程序不可用；
>5. 网络架构某个重要角色如nginx或者数据库突然不可用；
>6. 自然灾害或人为破坏；
4. 提高系统可用性方法.
>* 注意代码质量，测试严格把关；
>* 使用集群，减少单点故障；
>* 限流；
>* 超时和重试机制；
>* 熔断机制；
>* 异步调用；
>* 使用缓存；
>* 核心应用和服务有限使用更好的硬件；
>* 监控系统资源使用情况增加报警设置；
>* 注意备份，必要时回滚；
>* 灰度发布；
>* 定期检查硬件；